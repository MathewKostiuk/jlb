function loadJqueryGrizzly() { var xhr = new XMLHttpRequest(); xhr.onreadystatechange = function() { if (xhr.readyState == XMLHttpRequest.DONE) { var data = xhr.responseText; jQueryGrizzly = data.replace(/jQuery/g,'jQueryGrizzly'); eval(jQueryGrizzly); if (typeof jQuery !== 'undefined') { $ = jQuery.noConflict(); } } }; xhr.open('GET', 'https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js', false); xhr.send(null); } var forceJqueryLoad = false; if (typeof jQuery == 'undefined' || forceJqueryLoad) { loadJqueryGrizzly(); } else { var vernums = jQuery.fn.jquery.split('.'); if ((parseInt(vernums[0]) == 1 && parseInt(vernums[1]) >= 7) || parseInt(vernums[0]) > 1) { var jQueryGrizzly = jQuery; } else { loadJqueryGrizzly(); } } var DoublyGlobalCurrency, catchXHR = true; if (typeof CurrenciesJSON==='undefined') {var CurrenciesJSON=''; jQueryGrizzly.get('https://init.grizzlyapps.com/9e32c84f0db4f7b1eb40c32bdb0bdea9',function(data){ if (data=='') { CurrenciesJSON = 'forbidden'; return false; } CurrenciesJSON = data.replace('Currency','DoublyCurrency');eval(CurrenciesJSON);var spanClass = 'money', cookieName = '_g1561589771';/* JavaScript Cookie v2.0.4 * https://github.com/js-cookie/js-cookie * Copyright 2006, 2015 Klaus Hartl & Fagner Brack * Released under the MIT license */!function(e){var n=window.Cookies,t=window.Cookies=e();t.noConflict=function(){return window.Cookies=n,t}}(function(){function e(){for(var e=0,n={};e<arguments.length;e++){var t=arguments[e];for(var o in t)n[o]=t[o]}return n}function n(t){function o(n,r,i){var c;if(arguments.length>1){if(i=e({path:"/"},o.defaults,i),"number"==typeof i.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*i.expires),i.expires=s}try{c=JSON.stringify(r),/^[\{\[]/.test(c)&&(r=c)}catch(a){}return r=t.write?t.write(r,n):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),n=n.replace(/[\(\)]/g,escape),document.cookie=[n,"=",r,i.expires&&"; expires="+i.expires.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure?"; secure":""].join("")}n||(c={});for(var p=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,u=0;u<p.length;u++){var f=p[u].split("="),l=f[0].replace(d,decodeURIComponent),m=f.slice(1).join("=");'"'===m.charAt(0)&&(m=m.slice(1,-1));try{if(m=t.read?t.read(m,l):t(m,l)||m.replace(d,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(a){}if(n===l){c=m;break}n||(c[l]=m)}catch(a){}}return c}return o.get=o.set=o,o.getJSON=function(){return o.apply({json:!0},[].slice.call(arguments))},o.defaults={},o.remove=function(n,t){o(n,"",e(t,{expires:-1}))},o.withConverter=n,o}return n(function(){})}); /* Currency tools * Copyright (c) 2015 Caroline Schnapp (mllegeorgesand@gmail.com) * Licensed under the MIT license: * http://www.opensource.org/licenses/mit-license.php */ if(typeof DoublyCurrency === "undefined") { var DoublyCurrency= {} ; } DoublyCurrency.cookie= { configuration: { path: "/", domain: window.location.hostname }, name:cookieName, write:function(currency) { Cookies.set(this.name, btoa(currency), this.configuration) }, read:function() { var cookie = Cookies.get(this.name); if (typeof cookie == "undefined") { return cookie; } else { return atob(cookie); } }, destroy:function() { Cookies.remove(this.name, this.configuration) } }; DoublyCurrency.moneyFormats = { USD: { money_format:"${{amount}}", money_with_currency_format:"${{amount}} USD" }, EUR: { money_format: "&euro;{{amount}}", money_with_currency_format: "&euro;{{amount}} EUR" }, GBP: { money_format: "&pound;{{amount}}", money_with_currency_format: "&pound;{{amount}} GBP" }, CAD: { money_format:"${{amount}}", money_with_currency_format:"${{amount}} CAD" }, ALL: { money_format:"Lek {{amount}}", money_with_currency_format:"Lek {{amount}} ALL" }, DZD: { money_format:"DA {{amount}}", money_with_currency_format:"DA {{amount}} DZD" }, AOA: { money_format:"Kz{{amount}}", money_with_currency_format:"Kz{{amount}} AOA" }, ARS: { money_format:"${{amount_with_comma_separator}}", money_with_currency_format:"${{amount_with_comma_separator}} ARS" }, AMD: { money_format: "{{amount}}", money_with_currency_format: "{{amount}} AMD" }, AWG: { money_format:"Afl{{amount}}", money_with_currency_format:"Afl{{amount}} AWG" }, AUD: { money_format:"${{amount}}", money_with_currency_format:"${{amount}} AUD" }, BBD: { money_format:"${{amount}}", money_with_currency_format:"${{amount}} Bds" }, AZN: { money_format:"&#8380;{{amount}}", money_with_currency_format:"&#8380;{{amount}} AZN" }, BDT: { money_format:"Tk {{amount}}", money_with_currency_format:"Tk {{amount}} BDT" }, BSD: { money_format:"BS${{amount}}", money_with_currency_format:"BS${{amount}} BSD" }, BHD: { money_format:"{{amount}} BD", money_with_currency_format:"{{amount}} BHD" }, BYN: { money_format:"Br {{amount}}", money_with_currency_format:"Br {{amount}} BYN" }, BZD: { money_format:"BZ${{amount}}", money_with_currency_format:"BZ${{amount}} BZD" }, BTN: { money_format:"Nu {{amount}}", money_with_currency_format:"Nu {{amount}} BTN" }, BAM: { money_format:"KM {{amount_with_comma_separator}}", money_with_currency_format:"KM {{amount_with_comma_separator}} BAM" }, BRL: { money_format:"R$ {{amount_with_comma_separator}}", money_with_currency_format:"R$ {{amount_with_comma_separator}} BRL" }, BOB: { money_format:"Bs{{amount_with_comma_separator}}", money_with_currency_format:"Bs{{amount_with_comma_separator}} BOB" }, BWP: { money_format:"P{{amount}}", money_with_currency_format:"P{{amount}} BWP" }, BND: { money_format:"${{amount}}", money_with_currency_format:"${{amount}} BND" }, BGN: { money_format:"{{amount}} лв", money_with_currency_format:"{{amount}} лв BGN" }, MMK: { money_format:"K{{amount}}", money_with_currency_format:"K{{amount}} MMK" }, KHR: { money_format:"KHR{{amount}}", money_with_currency_format:"KHR{{amount}}" }, KYD: { money_format:"${{amount}}", money_with_currency_format:"${{amount}} KYD" }, XAF: { money_format:"FCFA{{amount}}", money_with_currency_format:"FCFA{{amount}} XAF" }, CLP: { money_format:"${{amount_no_decimals}}", money_with_currency_format:"${{amount_no_decimals}} CLP" }, CNY: { money_format: "&#165;{{amount}}", money_with_currency_format: "&#165;{{amount}} CNY" }, COP: { money_format:"${{amount_with_comma_separator}}", money_with_currency_format:"${{amount_with_comma_separator}} COP" }, CRC: { money_format: "&#8353; {{amount_with_comma_separator}}", money_with_currency_format: "&#8353; {{amount_with_comma_separator}} CRC" }, HRK: { money_format:"{{amount_with_comma_separator}} kn", money_with_currency_format:"{{amount_with_comma_separator}} kn HRK" }, CZK: { money_format:"{{amount_with_comma_separator}} K&#269;", money_with_currency_format:"{{amount_with_comma_separator}} K&#269;" }, DKK: { money_format:"kr {{amount_with_comma_separator}}", money_with_currency_format:"kr {{amount_with_comma_separator}} DKK" }, DOP: { money_format:"RD$ {{amount}}", money_with_currency_format:"RD$ {{amount}}" }, XCD: { money_format:"${{amount}}", money_with_currency_format:"EC${{amount}}" }, EGP: { money_format:"LE {{amount}}", money_with_currency_format:"LE {{amount}} EGP" }, ETB: { money_format:"Br{{amount}}", money_with_currency_format:"Br{{amount}} ETB" }, XPF: { money_format:"{{amount_no_decimals_with_comma_separator}} XPF", money_with_currency_format:"{{amount_no_decimals_with_comma_separator}} XPF" }, FJD: { money_format:"${{amount}}", money_with_currency_format:"FJ${{amount}}" }, GMD: { money_format:"D {{amount}}", money_with_currency_format:"D {{amount}} GMD" }, GHS: { money_format: "GH&#8373;{{amount}}", money_with_currency_format: "GH&#8373;{{amount}}" }, GTQ: { money_format:"Q{{amount}}", money_with_currency_format:"{{amount}} GTQ" }, GYD: { money_format:"G${{amount}}", money_with_currency_format:"${{amount}} GYD" }, GEL: { money_format:"{{amount}} GEL", money_with_currency_format:"{{amount}} GEL" }, HNL: { money_format:"L {{amount}}", money_with_currency_format:"L {{amount}} HNL" }, HKD: { money_format:"HK${{amount}}", money_with_currency_format:"HK${{amount}} HKD" }, HUF: { money_format:"{{amount_no_decimals_with_comma_separator}}", money_with_currency_format:"{{amount_no_decimals_with_comma_separator}} Ft" }, ISK: { money_format:"{{amount_no_decimals}} kr", money_with_currency_format:"{{amount_no_decimals}} kr ISK" }, INR: { money_format: "&#8377; {{amount}}", money_with_currency_format: "&#8377; {{amount}} INR" }, IDR: { money_format:"{{amount_with_comma_separator}} IDR", money_with_currency_format:"Rp {{amount_with_comma_separator}} IDR" }, ILS: { money_format: "&#8362;{{amount}}", money_with_currency_format: "&#8362;{{amount}} NIS" }, JMD: { money_format:"${{amount}}", money_with_currency_format:"${{amount}} JMD" }, JPY: { money_format: "&#165;{{amount_no_decimals}}", money_with_currency_format: "&#165;{{amount_no_decimals}} JPY" }, JEP: { money_format: "&pound;{{amount}}", money_with_currency_format: "&pound;{{amount}} JEP" }, JOD: { money_format:"{{amount}} JD", money_with_currency_format:"{{amount}} JOD" }, KZT: { money_format:"{{amount}} KZT", money_with_currency_format:"{{amount}} KZT" }, KES: { money_format:"KSh{{amount}}", money_with_currency_format:"KSh{{amount}}" }, KWD: { money_format:"{{amount}} KD", money_with_currency_format:"{{amount}} KWD" }, KGS: { money_format:"лв{{amount}}", money_with_currency_format:"лв{{amount}}" }, LVL: { money_format:"Ls {{amount}}", money_with_currency_format:"Ls {{amount}} LVL" }, LBP: { money_format: "L.L.{{amount}}", money_with_currency_format: "L.L.{{amount}} LBP" }, LTL: { money_format:"{{amount}} Lt", money_with_currency_format:"{{amount}} Lt" }, MGA: { money_format:"Ar {{amount}}", money_with_currency_format:"Ar {{amount}} MGA" }, MKD: { money_format:"ден {{amount}}", money_with_currency_format:"ден {{amount}} MKD" }, MOP: { money_format:"MOP${{amount}}", money_with_currency_format:"MOP${{amount}}" }, MVR: { money_format:"Rf{{amount}}", money_with_currency_format:"Rf{{amount}} MVR" }, MXN: { money_format:"$ {{amount}}", money_with_currency_format:"$ {{amount}} MXN" }, MYR: { money_format:"RM{{amount}}", money_with_currency_format:"RM{{amount}} MYR" }, MUR: { money_format:"Rs {{amount}}", money_with_currency_format:"Rs {{amount}} MUR" }, MDL: { money_format:"{{amount}} MDL", money_with_currency_format:"{{amount}} MDL" }, MAD: { money_format:"{{amount}} dh", money_with_currency_format:"Dh {{amount}} MAD" }, MNT: { money_format:"{{amount_no_decimals}} &#8366", money_with_currency_format:"{{amount_no_decimals}} MNT" }, MZN: { money_format:"{{amount}} Mt", money_with_currency_format:"Mt {{amount}} MZN" }, NAD: { money_format:"N${{amount}}", money_with_currency_format:"N${{amount}} NAD" }, NPR: { money_format:"Rs{{amount}}", money_with_currency_format:"Rs{{amount}} NPR" }, ANG: { money_format: "&fnof;{{amount}}", money_with_currency_format:"{{amount}} NA&fnof;" }, NZD: { money_format:"${{amount}}", money_with_currency_format:"${{amount}} NZD" }, NIO: { money_format:"C${{amount}}", money_with_currency_format:"C${{amount}} NIO" }, NGN: { money_format: "&#8358;{{amount}}", money_with_currency_format: "&#8358;{{amount}} NGN" }, NOK: { money_format:"kr {{amount_with_comma_separator}}", money_with_currency_format:"kr {{amount_with_comma_separator}} NOK" }, OMR: { money_format:"{{amount_with_comma_separator}} OMR", money_with_currency_format:"{{amount_with_comma_separator}} OMR" }, PKR: { money_format:"Rs.{{amount}}", money_with_currency_format:"Rs.{{amount}} PKR" }, PGK: { money_format:"K {{amount}}", money_with_currency_format:"K {{amount}} PGK" }, PYG: { money_format:"Gs. {{amount_no_decimals_with_comma_separator}}", money_with_currency_format:"Gs. {{amount_no_decimals_with_comma_separator}} PYG" }, PEN: { money_format:"S/. {{amount}}", money_with_currency_format:"S/. {{amount}} PEN" }, PHP: { money_format: "&#8369;{{amount}}", money_with_currency_format: "&#8369;{{amount}} PHP" }, PLN: { money_format:"{{amount_with_comma_separator}} zl", money_with_currency_format:"{{amount_with_comma_separator}} zl PLN" }, QAR: { money_format:"QAR {{amount_with_comma_separator}}", money_with_currency_format:"QAR {{amount_with_comma_separator}}" }, RON: { money_format:"{{amount_with_comma_separator}} lei", money_with_currency_format:"{{amount_with_comma_separator}} lei RON" }, RUB: { money_format: "&#8381; {{amount_with_comma_separator}}", money_with_currency_format: "&#8381; {{amount_with_comma_separator}} RUB" }, /*RUB: { money_format: "&#1088;&#1091;&#1073;{{amount_with_comma_separator}}", money_with_currency_format: "&#1088;&#1091;&#1073;{{amount_with_comma_separator}} RUB" }, */ RWF: { money_format:"{{amount_no_decimals}} RF", money_with_currency_format:"{{amount_no_decimals}} RWF" }, WST: { money_format:"WS$ {{amount}}", money_with_currency_format:"WS$ {{amount}} WST" }, SAR: { money_format:"{{amount}} SR", money_with_currency_format:"{{amount}} SAR" }, STD: { money_format:"Db {{amount}}", money_with_currency_format:"Db {{amount}} STD" }, RSD: { money_format:"{{amount}} RSD", money_with_currency_format:"{{amount}} RSD" }, SCR: { money_format:"Rs {{amount}}", money_with_currency_format:"Rs {{amount}} SCR" }, SGD: { money_format:"S${{amount}}", money_with_currency_format:"S${{amount}} SGD" }, SYP: { money_format: "S&pound;{{amount}}", money_with_currency_format: "S&pound;{{amount}} SYP" }, ZAR: { money_format:"R {{amount}}", money_with_currency_format:"R {{amount}} ZAR" }, KRW: { money_format: "&#8361;{{amount_no_decimals}}", money_with_currency_format: "&#8361;{{amount_no_decimals}} KRW" }, LKR: { money_format:"Rs {{amount}}", money_with_currency_format:"Rs {{amount}} LKR" }, SEK: { money_format:"kr {{amount_with_comma_separator}}", money_with_currency_format:"kr {{amount_with_comma_separator}} SEK" }, CHF: { money_format:"SFr. {{amount}}", money_with_currency_format:"SFr. {{amount}} CHF" }, TWD: { money_format:"${{amount}}", money_with_currency_format:"${{amount}} TWD" }, THB: { money_format:"{{amount}} &#xe3f;", money_with_currency_format:"{{amount}} &#xe3f; THB" }, TZS: { money_format:"{{amount}} TZS", money_with_currency_format:"{{amount}} TZS" }, TTD: { money_format:"${{amount}}", money_with_currency_format:"${{amount}} TTD" }, TND: { money_format:"{{amount}}", money_with_currency_format:"{{amount}} DT" }, TRY: { money_format:"{{amount}} TL", money_with_currency_format:"{{amount}} TL" }, UGX: { money_format:"Ush {{amount_no_decimals}}", money_with_currency_format:"Ush {{amount_no_decimals}} UGX" }, UAH: { money_format:"₴{{amount}}", money_with_currency_format:"₴{{amount}} UAH" }, AED: { money_format:"{{amount}} د.إ", money_with_currency_format:"{{amount}} د.إ AED" }, UYU: { money_format:"${{amount_with_comma_separator}}", money_with_currency_format:"${{amount_with_comma_separator}} UYU" }, VUV: { money_format:"${{amount}}", money_with_currency_format:"${{amount}}VT" }, VEF: { money_format:"Bs. {{amount_with_comma_separator}}", money_with_currency_format:"Bs. {{amount_with_comma_separator}} VEF" }, VND: { money_format:"{{amount_no_decimals_with_comma_separator}}&#8363;", money_with_currency_format:"{{amount_no_decimals_with_comma_separator}} VND" }, BTC: { money_format:"{{amount_no_decimals}} BTC", money_with_currency_format:"{{amount_no_decimals}} BTC" }, XOF: { money_format:"CFA{{amount}}", money_with_currency_format:"CFA{{amount}} XOF" }, ZMW: { money_format:"K{{amount_no_decimals_with_comma_separator}}", money_with_currency_format:"ZMW{{amount_no_decimals_with_comma_separator}}" }, AFN: { money_format: "&#65;&#102; {{amount}}", money_with_currency_format: "&#65;&#102; {{amount}} AFN" }, BMD: { money_format: "&#36; {{amount}}", money_with_currency_format: "&#36; {{amount}} BMD" }, BIF: { money_format: "&#70;&#66;&#117; {{amount}}", money_with_currency_format: "&#70;&#66;&#117; {{amount}} BIF" }, CVE: { money_format: "&#36; {{amount}}", money_with_currency_format: "&#36; {{amount}} CVE" }, KMF: { money_format: "&#67;&#70; {{amount}}", money_with_currency_format: "&#67;&#70; {{amount}} KMF" }, CDF: { money_format: "&#70;&#67; {{amount}}", money_with_currency_format: "&#70;&#67; {{amount}} CDF" }, CUC: { money_format:"{{amount}}", money_with_currency_format:"{{amount}} CUC" }, CUP: { money_format: "{{amount}}", money_with_currency_format: "{{amount}} CUP" }, DJF: { money_format: "&#70;&#100;&#106; {{amount}}", money_with_currency_format: "&#70;&#100;&#106; {{amount}} DJF" }, ERN: { money_format:"{{amount}}", money_with_currency_format:"{{amount}} ERN" }, EEK: { money_format:"{{amount}}", money_with_currency_format:"{{amount}} EEK" }, FKP: { money_format: "&#163; {{amount}}", money_with_currency_format: "&#163; {{amount}} FKP" }, GIP: { money_format: "&#163; {{amount}}", money_with_currency_format: "&#163; {{amount}} GIP" }, XAU: { money_format:"{{amount}}", money_with_currency_format:"{{amount}} XAU" }, GGP: { money_format:"{{amount}}", money_with_currency_format:"{{amount}} GGP" }, GNF: { money_format: "&#70;&#71; {{amount}}", money_with_currency_format: "&#70;&#71; {{amount}} GNF" }, HTG: { money_format: "&#71; {{amount}}", money_with_currency_format: "&#71; {{amount}} HTG" }, XDR: { money_format:"{{amount}}", money_with_currency_format:"{{amount}} XDR" }, IRR: { money_format: "&#65020; {{amount}}", money_with_currency_format: "&#65020; {{amount}} IRR" }, IQD: { money_format: "&#1593;.&#1583; {{amount}}", money_with_currency_format: "&#1593;.&#1583; {{amount}} IQD" }, IMP: { money_format:"{{amount}}", money_with_currency_format:"{{amount}} IMP" }, LAK: { money_format: "&#8365; {{amount}}", money_with_currency_format: "&#8365; {{amount}} LAK" }, LSL: { money_format: "&#76; {{amount}}", money_with_currency_format: "&#76; {{amount}} LSL" }, LRD: { money_format: "&#36; {{amount}}", money_with_currency_format: "&#36; {{amount}} LRD" }, LYD: { money_format: "&#1604;.&#1583; {{amount}}", money_with_currency_format: "&#1604;.&#1583; {{amount}} LYD" }, MWK: { money_format: "&#77;&#75; {{amount}}", money_with_currency_format: "&#77;&#75; {{amount}} MWK" }, MRO: { money_format: "&#85;&#77; {{amount}}", money_with_currency_format: "&#85;&#77; {{amount}} MRO" }, KPW: { money_format: "&#8361; {{amount}}", money_with_currency_format: "&#8361; {{amount}} KPW" }, XPD: { money_format:"{{amount}}", money_with_currency_format:"{{amount}} XPD" }, PAB: { money_format: "&#66;&#47;&#46; {{amount}}", money_with_currency_format: "&#66;&#47;&#46; {{amount}} PAB" }, XPT: { money_format:"{{amount}}", money_with_currency_format:"{{amount}} XPT" }, SHP: { money_format: "&#163; {{amount}}", money_with_currency_format: "&#163; {{amount}} SHP" }, SVC: { money_format: "&#36; {{amount}}", money_with_currency_format: "&#36; {{amount}} SVC" }, SPL: { money_format:"{{amount}}", money_with_currency_format:"{{amount}} SPL" }, SLL: { money_format: "&#76;&#101; {{amount}}", money_with_currency_format: "&#76;&#101; {{amount}} SLL" }, XAG: { money_format:"{{amount}}", money_with_currency_format:"{{amount}} XAG" }, SKK: { money_format:"{{amount}}", money_with_currency_format:"{{amount}} SKK" }, SBD: { money_format: "&#36; {{amount}}", money_with_currency_format: "&#36; {{amount}} SBD" }, SOS: { money_format: "&#83; {{amount}}", money_with_currency_format: "&#83; {{amount}} SOS" }, SDG: { money_format: "&#163; {{amount}}", money_with_currency_format: "&#163; {{amount}} SDG" }, SRD: { money_format: "&#36; {{amount}}", money_with_currency_format: "&#36; {{amount}} SRD" }, SZL: { money_format: "&#76; {{amount}}", money_with_currency_format: "&#76; {{amount}} SZL" }, TJS: { money_format: "&#84;&#74;&#83; {{amount}}", money_with_currency_format: "&#84;&#74;&#83; {{amount}} TJS" }, TOP: { money_format: "&#84;&#36; {{amount}}", money_with_currency_format: "&#84;&#36; {{amount}} TOP" }, TMT: { money_format: "&#109; {{amount}}", money_with_currency_format: "&#109; {{amount}} TMT" }, TVD: { money_format:"{{amount}}", money_with_currency_format:"{{amount}} TVD" }, UZS: { money_format: "&#1083;&#1074; {{amount}}", money_with_currency_format: "&#1083;&#1074; {{amount}} UZS" }, YER: { money_format: "&#65020; {{amount}}", money_with_currency_format: "&#65020; {{amount}} YER" }, ZWD: { money_format:"{{amount}}", money_with_currency_format:"{{amount}} ZWD" } }; DoublyCurrency.formatMoney = function(cents, format, isShopCurrency, hasSup) { function defaultOption(opt, def) { if (typeof opt == "undefined") { return def; } else { return opt; } } function formatWithDelimiters(number, precision, thousands, decimal) { precision = defaultOption(precision, 2); thousands = defaultOption(thousands, ","); decimal = defaultOption(decimal, "."); if (isNaN(number) || number == null) { return 0; } number=(number/100).toFixed(precision); var parts = number.split("."), dollars = parts[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1" + thousands), cents = parts[1] ? (decimal + parts[1]) : ""; if (hasSup) { return dollars + "<sup>" + cents + "</sup>"; } else { return dollars + cents; } } if (typeof cents == "string") { cents = cents.replace(".", ""); } var value = "", placeholderRegex = /\{\{\s*(\w+)\s*\}\}/, formatString = format || "${{amount}}", decimals=2; if ((!isShopCurrency && (DoublyCurrency.currentCurrency=="KWD" || DoublyCurrency.currentCurrency=="BHD" || DoublyCurrency.currentCurrency=="JOD" || DoublyCurrency.currentCurrency=="OMR")) || (isShopCurrency && (shopCurrency=="KWD" || shopCurrency=="BHD" || shopCurrency=="JOD" || shopCurrency=="OMR"))) { decimals = 3; } if (removeDecimals) { decimals = 0; } if ((!isShopCurrency && DoublyCurrency.currentCurrency=="BTC") || (isShopCurrency && shopCurrency=="BTC")) { decimals = 8; } switch(formatString.match(placeholderRegex)[1]) { case "amount": case "amount_no_decimals": value = formatWithDelimiters(cents, decimals); if(roundDecimals && !isShopCurrency && this.currentCurrency!=shopCurrency && this.currentCurrency!="BTC" && value!=0 && value.toString().indexOf(".")!==-1) { value=value.substr(0, (value.toString().indexOf(".")+1))+roundTo; if (DoublyCurrency.currentCurrency=="KWD" || DoublyCurrency.currentCurrency=="BHD" || DoublyCurrency.currentCurrency=="JOD" || DoublyCurrency.currentCurrency=="OMR") { value += "0"; } if (hasSup) { value += "</sup>"; } } break; case "amount_with_comma_separator": case "amount_no_decimals_with_comma_separator": value=formatWithDelimiters(cents, decimals, ".", ","); if(roundDecimals && !isShopCurrency && this.currentCurrency!=shopCurrency && this.currentCurrency!="BTC" && value.toString().replace(",",".")!=0 && value.toString().indexOf(",")!==-1) { value=value.substr(0, (value.toString().indexOf(",")+1))+roundTo; if (DoublyCurrency.currentCurrency=="KWD" || DoublyCurrency.currentCurrency=="BHD" || DoublyCurrency.currentCurrency=="JOD" || DoublyCurrency.currentCurrency=="OMR") { value += "0"; } if (hasSup) { value += "</sup>"; } } } if (!isNaN(cents)) { return formatString.replace(placeholderRegex, value) } else { return "" } }; DoublyCurrency.currentCurrency=""; DoublyCurrency.format="money_with_currency_format"; DoublyCurrency.getPriceOnly = function(priceHtml, oldFormat) { var regex=/\{\{\s*(\w+)\s*\}\}/; var array = oldFormat.replace(regex, " ").replace(/ +/g, " ").split(" "); /* remove $ or USD from price, without removing any html tags or dots (.) or commas (,) */ jQueryGrizzly(array).each(function(index, value) { priceHtml = priceHtml.replace(jQueryGrizzly("<div/>").html(value).text(), ""); }); /* get decimal point or comma */ decimal="."; if (oldFormat.indexOf("comma") !== -1) { decimal = ","; } /* check for and remove <sup></sup> html tags */ if (priceHtml.indexOf(decimal) === -1 && priceHtml.indexOf("<sup>") !== -1) { priceHtml = priceHtml.replace("<sup>",decimal).replace("</sup>",""); } return priceHtml; }; DoublyCurrency.convertAll = function(newCurrency, selector) { var isShopCurrency = false; if (selector==undefined) { this.currentCurrency = newCurrency; this.cookie.write(newCurrency); } if (selector!==undefined && selector==".price-on-hover") { var dataCurrencyShop = jQueryGrizzly(selector).closest("."+spanClass).attr("doubly-currency-"+shopCurrency); jQueryGrizzly(selector).attr("doubly-currency-"+shopCurrency, dataCurrencyShop); isShopCurrency = true; } jQueryGrizzly(selector || "span."+spanClass).each(function() { /* If the amount has already been converted, we leave it alone. */ if (jQueryGrizzly(this).attr("doubly-currency") === newCurrency) return; /* If we are converting to a currency that we have saved, we will use the saved amount. */ if(jQueryGrizzly(this).attr("doubly-currency-"+newCurrency)) { var newFormat = DoublyCurrency.moneyFormats[newCurrency][DoublyCurrency.format] || "{{amount}}"; if(newCurrency!=="BTC") { cents = parseInt(jQueryGrizzly(this).attr("doubly-currency-"+newCurrency), 10); } else { cents = Number(jQueryGrizzly(this).attr("doubly-currency-"+newCurrency)); } var hasSup = false; if (jQueryGrizzly(this).html().indexOf("<sup>") !== -1) { hasSup = true; } var newFormattedAmount = DoublyCurrency.formatMoney(cents, newFormat, isShopCurrency, hasSup); jQueryGrizzly(this).html(newFormattedAmount); } else { /* convert to Y for the first time */ var cents=0, shopPrice=0, oldFormat = DoublyCurrency.moneyFormats[shopCurrency][DoublyCurrency.format] || "{{amount}}", newFormat = DoublyCurrency.moneyFormats[newCurrency][DoublyCurrency.format] || "{{amount}}"; if(jQueryGrizzly(this).attr("doubly-currency-"+shopCurrency)) { shopPrice = jQueryGrizzly(this).attr("doubly-currency-"+shopCurrency); } else { var priceHtml = jQueryGrizzly(this).html(); priceHtml = DoublyCurrency.getPriceOnly(priceHtml, oldFormat); if (priceHtml.indexOf(decimal) == -1) { shopPrice = parseInt(jQueryGrizzly(this).html().replace(/[^0-9]/g, ""), 10)*100; } else if (shopCurrency === "KWD" || shopCurrency === "JOD" || shopCurrency == "BHD" || shopCurrency == "OMR") { shopPrice = parseInt(jQueryGrizzly(this).html().replace(/[^0-9]/g, ""), 10)/10; } else { shopPrice = parseInt(jQueryGrizzly(this).html().replace(/[^0-9]/g, ""), 10); } jQueryGrizzly(this).attr("doubly-currency-"+shopCurrency, shopPrice); } if (shopCurrency!=newCurrency) { cents = DoublyCurrency.convert(shopPrice, shopCurrency, newCurrency); } else { cents = shopPrice; } jQueryGrizzly(this).attr("doubly-currency-"+newCurrency, cents); var hasSup = false; if (jQueryGrizzly(this).html().indexOf("<sup>") !== -1) { hasSup = true; } var newFormattedAmount = DoublyCurrency.formatMoney(cents, newFormat, isShopCurrency, hasSup); jQueryGrizzly(this).html(newFormattedAmount); } /* We record the new currency locally. */ jQueryGrizzly(this).attr("doubly-currency", newCurrency); }); }; jQueryGrizzly('head').append('<style>.layered-currency-switcher{width:auto;float:right;padding:0 0 0 50px;margin:0px;}.layered-currency-switcher li{display:block;float:left;font-size:15px;margin:0px;}.layered-currency-switcher li button.currency-switcher-btn{width:auto;height:auto;margin-bottom:0px;background:#fff;font-family:Arial!important;line-height:18px;border:1px solid #dadada;border-radius:25px;color:#9a9a9a;float:left;font-weight:700;margin-left:-46px;min-width:90px;position:relative;text-align:center;text-decoration:none;padding:10px 11px 10px 49px}.price-on-hover,.price-on-hover-wrapper{font-size:15px!important;line-height:25px!important}.layered-currency-switcher li button.currency-switcher-btn:focus{outline:0;-webkit-outline:none;-moz-outline:none;-o-outline:none}.layered-currency-switcher li button.currency-switcher-btn:hover{background:#ddf6cf;border-color:#a9d092;color:#89b171}.layered-currency-switcher li button.currency-switcher-btn span{display:none}.layered-currency-switcher li button.currency-switcher-btn:first-child{border-radius:25px}.layered-currency-switcher li button.currency-switcher-btn.selected{background:#de4c39;border-color:#de4c39;color:#fff;z-index:99;padding-left:23px!important;padding-right:23px!important}.layered-currency-switcher li button.currency-switcher-btn.selected span{display:inline-block}.doubly,.money{position:relative; font-weight:inherit !important; font-size:inherit !important;text-decoration:inherit !important;}.price-on-hover-wrapper{position:absolute;left:-50%;text-align:center;width:200%;top:110%;z-index:100000000}.price-on-hover{background:#333;border-color:#FFF!important;padding:2px 5px 3px;font-weight:400;border-radius:5px;font-family:Helvetica Neue,Arial;color:#fff;border:0}.price-on-hover:after{content:"";position:absolute;left:50%;margin-left:-4px;margin-top:-2px;width:0;height:0;border-bottom:solid 4px #333;border-left:solid 4px transparent;border-right:solid 4px transparent}.doubly-message{margin:5px 0}.doubly-wrapper{float:right}.doubly-float{position:fixed;bottom:10px;left:10px;right:auto;z-index:100000;}select.currency-switcher{margin:0px; position:relative; top:auto;}</style>');jQueryGrizzly('head').append('<style>.price-on-hover { background-color: #333333 !important; color: #FFFFFF !important; } .price-on-hover:after { border-bottom-color: #333333 !important;}</style>');var doublyInstalled = false; jQueryGrizzly('script').each(function(){ if (jQueryGrizzly(this).text().indexOf('ginit.js?')!=-1 && jQueryGrizzly(this).text().indexOf('asyncLoad')!=-1) { doublyInstalled = true; } }); if (doublyInstalled && typeof DoublyCurrency !== 'undefined') { /* add select in select wrapper or body */ if (jQueryGrizzly('.doubly-wrapper').length>0) { var doublyWrapper = '.doubly-wrapper'; } else if (jQueryGrizzly('.doubly-float').length==0) { var doublyWrapper = '.doubly-float'; jQueryGrizzly('body').append('<div class="doubly-float"></div>'); } jQueryGrizzly(doublyWrapper).each(function() { jQueryGrizzly(this).prepend('<select class="currency-switcher" name="doubly-currencies"><option value="USD">USD</option><option value="JPY">JPY</option><option value="EUR">EUR</option><option value="AUD">AUD</option><option value="CNY">CNY</option></select>'); }); var shopCurrency = 'JPY'; var defaultCurrency = shopCurrency; var allowedCurrencies = jQueryGrizzly.parseJSON('["USD","JPY","EUR","AUD","CNY"]'); var removeDecimals = 0; var roundDecimals = 0; var roundTo = '99'; var showPriceOnHover = 0; var showCurrencyMessage = 0; var currencyMessage = 'All orders are processed in JPY. While the content of your cart is currently displayed in <span class="selected-currency"></span>, you will checkout using JPY at the most current exchange rate.'; DoublyCurrency.format = 'money_with_currency_format'; function initCurrencySwitcher() { /* Cookie currency */ var cookieCurrency = DoublyCurrency.cookie.read(); /* Set select value before document ready functions fire to avoid lag */ if (cookieCurrency == null || cookieCurrency == 'undefined') { jQueryGrizzly('[name=doubly-currencies]').val(defaultCurrency); } else { jQueryGrizzly('[name=doubly-currencies]').val(cookieCurrency); } /* Fix for customer account pages */ jQueryGrizzly('span.'+spanClass+' span.'+spanClass).each(function() { jQueryGrizzly(this).parents('span.'+spanClass).removeClass(spanClass); }); /* If there's no cookie. */ if (cookieCurrency == null || cookieCurrency == 'undefined') { DoublyCurrency.convertAll(defaultCurrency); } /* If the cookie value does not correspond to any value in the currency dropdown. */ else if (jQueryGrizzly.inArray(cookieCurrency,allowedCurrencies)===-1) { DoublyCurrency.currentCurrency = shopCurrency; DoublyCurrency.cookie.write(shopCurrency); } else { DoublyCurrency.convertAll(cookieCurrency); } jQueryGrizzly('[name=doubly-currencies]').change(function() { var newCurrency = jQueryGrizzly(this).val(); DoublyCurrency.convertAll(newCurrency); /* in case more than 1 currency switcher, update value of all of them */ jQueryGrizzly('[name=doubly-currencies]').val(jQueryGrizzly(this).val()); initExtraFeatures(); }); jQueryGrizzly('.single-option-selector').bind('change.single-option-selector', function() { DoublyCurrency.convertAll(jQueryGrizzly('[name=doubly-currencies]').val()); initExtraFeatures(); }); if (jQueryGrizzly('.single-option-radio label').length>0) { jQueryGrizzly('.single-option-radio label').bind('click.single-option-radio', function() { setTimeout(function(){ DoublyCurrency.convertAll(jQueryGrizzly('[name=doubly-currencies]').val()); initExtraFeatures(); },1); }); jQueryGrizzly('.single-option-radio label').bind('touchend.single-option-radio', function() { setTimeout(function(){ DoublyCurrency.convertAll(jQueryGrizzly('[name=doubly-currencies]').val()); initExtraFeatures(); },1); }); } /* Panda Swatchify app */ if (jQueryGrizzly('.swatch-panda .color label').length>0) { jQueryGrizzly('.swatch-panda .color label').click(function() { setTimeout(function(){DoublyCurrency.convertAll(jQueryGrizzly('[name=doubly-currencies]').val());},1); initExtraFeatures(); }); } /* sca-qv-button */ setTimeout(function(){ jQueryGrizzly('.sca-qv-button').bind('click.changeCurrency',function() { setTimeout(function(){ DoublyCurrency.convertAll(jQueryGrizzly('[name=doubly-currencies]').val()); jQueryGrizzly('.single-option-selector').bind('change.single-option-selector', function() { DoublyCurrency.convertAll(jQueryGrizzly('[name=doubly-currencies]').val()); initExtraFeatures(); }); },1000); }); },1000); if (jQueryGrizzly('.swatch-element').length>0) { jQueryGrizzly('.swatch-element').bind('click.swatch-element', function(){ setTimeout(function(){DoublyCurrency.convertAll(jQueryGrizzly('[name=doubly-currencies]').val());},1); }); } /* beeketing xhr */ if (catchXHR) { function addXMLRequestCallback(callback){ var oldSend, i; if( XMLHttpRequest.callbacks ) { XMLHttpRequest.callbacks.push( callback ); } else { XMLHttpRequest.callbacks = [callback]; oldSend = XMLHttpRequest.prototype.send; XMLHttpRequest.prototype.send = function(){ for( i = 0; i < XMLHttpRequest.callbacks.length; i++ ) { XMLHttpRequest.callbacks[i]( this ); } oldSend.apply(this, arguments); } } } addXMLRequestCallback( function( xhr ) { if (xhr._url.indexOf('recommendation/result/view-product/')!==-1 || xhr._url.indexOf('recommendation/result/recent-view/')!==-1) { setTimeout(function(){ DoublyCurrency.convertAll(jQueryGrizzly('[name=doubly-currencies]').val()); initExtraFeatures(); },1000); } }); } jQueryGrizzly(document).ajaxComplete(function() { DoublyCurrency.convertAll(jQueryGrizzly('[name=doubly-currencies]').val()); initExtraFeatures(); }); initExtraFeatures(); if (typeof afterCurrencySwitcherInit=='function'){afterCurrencySwitcherInit();} DoublyGlobalCurrency = DoublyCurrency; } function initExtraFeatures() { /* initPriceHover */ jQueryGrizzly('span.'+spanClass).unbind('mouseenter mouseleave'); if (showPriceOnHover && DoublyCurrency.currentCurrency !== shopCurrency) { jQueryGrizzly('span.'+spanClass).hover(function() { jQueryGrizzly(this).append('<span class="price-on-hover-wrapper"><span class="price-on-hover">'+jQueryGrizzly(this).text()+'</span></span>'); DoublyCurrency.convertAll(shopCurrency, '.price-on-hover'); },function() { jQueryGrizzly('span').remove('.price-on-hover-wrapper'); }); jQueryGrizzly('*').off('touchend.removePriceOnHover'); jQueryGrizzly('*').on('touchend.removePriceOnHover', function() { jQueryGrizzly('span').remove('.price-on-hover-wrapper'); }); jQueryGrizzly('span.'+spanClass).off('touchend.addPriceOnHover'); jQueryGrizzly('span.'+spanClass).on('touchend.addPriceOnHover', function() { var element = jQueryGrizzly(this); setTimeout(function(){ element.append('<span class="price-on-hover-wrapper"><span class="price-on-hover">'+element.text()+'</span></span>'); DoublyCurrency.convertAll(shopCurrency, '.price-on-hover'); },1); }); } /* initCartMessage */ if (showCurrencyMessage) { if (jQueryGrizzly('.doubly-message').html()=='') { jQueryGrizzly('.doubly-message').html(currencyMessage); } jQueryGrizzly('.selected-currency').text(DoublyCurrency.currentCurrency); } if (DoublyCurrency.currentCurrency == shopCurrency) { jQueryGrizzly('.doubly-message').hide(); } else { jQueryGrizzly('.doubly-message').show(); } } /* if user came from google shopping ad, disable converter */ var utmSource = getParameterByName('utm_source'); var dfwTracker = getParameterByName('dfw_tracker'); if ((utmSource==null || (utmSource!='googleshopping' && utmSource!='google')) && dfwTracker==null) { /* Country code */ var autoSwitch = 0; if (autoSwitch) { var tempCookieCurrency = DoublyCurrency.cookie.read(); var currencyByCountry = []; if (tempCookieCurrency == null || tempCookieCurrency == 'undefined') { jQueryGrizzly.get('https://currency.grizzlyapps.com/83d400c612f9a099fab8f76dcab73a48', function(data) { var countryCode = data.value; if (countryCode in currencyByCountry) { if (jQueryGrizzly.inArray(currencyByCountry[countryCode],allowedCurrencies)!=-1) { defaultCurrency = currencyByCountry[countryCode]; } } DoublyCurrency.cookie.write(defaultCurrency); initCurrencySwitcher(); }, 'json'); } else { if (jQueryGrizzly.inArray(tempCookieCurrency,allowedCurrencies)!=-1) { defaultCurrency = tempCookieCurrency; } initCurrencySwitcher(); } } else { initCurrencySwitcher(); } } else { defaultCurrency = shopCurrency; DoublyCurrency.cookie.write(defaultCurrency); initCurrencySwitcher(); jQueryGrizzly('.doubly-wrapper').hide(); jQueryGrizzly('.doubly-float').hide(); } function getParameterByName(name, url) { if (!url) url = window.location.href; name = name.replace(/[\[\]]/g, "\$&"); var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"), results = regex.exec(url); if (!results) return null; if (!results[2]) return ''; return decodeURIComponent(results[2].replace(/\+/g, " ")); } }},"text");}